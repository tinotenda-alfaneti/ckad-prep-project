apiVersion: batch/v1
kind: Job
metadata:
  name: redis-data-loader
  namespace: dev
spec:
  completions: 1
  template:
    spec:
      containers:
      - name: loader
        image: redis:7-alpine
        command:
        - sh
        - -c
        - |
          echo "Loading data into Redis..."
          for i in $(seq 1 100); do
            redis-cli -h redis SET "key_$i" "value_$i"
            echo "Loaded key_$i"
          done
          echo "Data load complete!"
      restartPolicy: OnFailure
  backoffLimit: 3
  ttlSecondsAfterFinished: 300
